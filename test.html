<html>
	<head>
		<title>lispjs test</title>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="lisp.js"></script>
		<link href="styles.css" rel="stylesheet" type="text/css" />
	</head>
	<body>
		<script type="text/javascript">
			function print(obj, type) {
				if (typeof obj !== 'string')
					obj = JSON.stringify(obj);
				
				$('#output').append('<div class="' + type + '">' + obj + '</div>')
			};
		
			$(function() {
				$('form').submit(function(evt) {
					evt.preventDefault();
					
					var input = $('#input').val();
					$('#input').val('');
					
					var evaluator;
					if (input[0] == '>') {
						input = input.substring(1);
						evaluator = eval;
					}
					if (input[0] == '#') {
						input = input.substring(1);
						evaluator = function(input) { return lispjs.parse(lispjs.tokenize(input)); };
					}
					else {
						evaluator = lispjs.interpret;
					}

						print(evaluator(input));
/*					try {
					}
					catch (e) {
						if (e instanceof SyntaxError) {						
							print(e.message, 'error')
						}
						else {
							print(e, 'error');
						}
					}*/
				});
			});
		</script>
		<div id="output">
		</div>
		<form action="">
			<input type="text" value="" id="input" />
		</form>
	</body>
</html>